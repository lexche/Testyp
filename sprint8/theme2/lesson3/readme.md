## Урок 3. Работа с MongoDB

В предыдущих уроках мы рассказали что такое нереляционные базы, рассказали как установить MongoDB и рассмотрели основные операции, в этом уроке расскажем про них более подробно через практику.

Cоздадим базу:

```
use yp_db
```

Создадим в этой базе 2 коллекции: students и faculties, с помощью команд:

```
db.createCollection('students', {validator: {$jsonSchema: {bsonType: 'object',required: ['ID', 'firstName', 'lastName', 'age', 'gpa'],properties: {ID: { bsonType: 'number' },firstName: { bsonType: 'string' },lastName: { bsonType: 'string' },age: { bsonType: 'number' },gpa: { bsonType: 'number' }}}}});

db.createCollection('faculties', {validator: {$jsonSchema: {bsonType: 'object',required: ['ID', 'Faculty', 'PS'],properties: {ID: { bsonType: 'number' },Faculty: { bsonType: 'string' },PS: { bsonType: 'number' }}}}});

```

Разберём эти команды более детально, они создают коллекции students и faculties в базе данных MongoDB с определенной валидационной схемой JSON. Валидационная схема гарантирует, что все документы, вставляемые в коллекцию students, соответствуют определенной структуре и содержат необходимые поля. 

Валидационная схема JSON — это набор правил, которые определяют структуру и содержимое документов в коллекции MongoDB. Схемы JSON гарантируют, что данные в коллекции соответствуют определенным стандартам, что делает их более надежными и управляемыми.

Валидационные схемы JSON определяются в объекте $jsonSchema и могут включать следующие свойства:

• bsonType: Определяет тип документа или поля (например, объект, строка, число).

• required: Список обязательных полей.

• properties: Определяет типы данных и ограничения для вложенных полей.

• additionalProperties: Указывает, разрешены ли дополнительные свойства, не указанные в схеме.

• pattern: Регулярное выражение, которому должны соответствовать значения для данного поля.

• minimum, maximum: Указывает минимальное и максимальное значение для числовых полей.

• minLength, maxLength: Указывает минимальную и максимальную длину для строковых полей.

Рассмотрим части строки кода более подробно для коллекции students:

• db.createCollection('students'): Эта часть создает новую коллекцию с именем students в текущей базе данных.

• {validator: {$jsonSchema: ...}}: Эта часть определяет валидационную схему JSON для коллекции students. Валидационная схема указана в объекте $jsonSchema.

• {bsonType: 'object', required: ['ID', 'firstName', 'lastName', 'age', 'gpa'], properties: {...}}: Это сама валидационная схема JSON. Она определяет следующее:

    * bsonType: 'object': Указывает, что документ должен быть объектом.

    * required: ['ID', 'firstName', 'lastName', 'age', 'gpa']: Указывает, что поля ID, firstName, lastName, age и gpa являются обязательными для каждого документа в коллекции.

    * properties: Определяет типы данных для каждого из обязательных полей:

        * ID: Должно быть числом (bsonType: 'number').

        * firstName: Должно быть строкой (bsonType: 'string').

        * lastName: Должно быть строкой (bsonType: 'string').

        * age: Должно быть числом (bsonType: 'number').

        * gpa: Должно быть числом (bsonType: 'number').

Таким образом, эта строка кода создает коллекцию students с валидационной схемой, которая требует, чтобы все документы имели определенную структуру и содержали обязательные поля ID, firstName, lastName, age и gpa с соответствующими типами данных, для коллекции faculties объяснение выше также подходит, отличие только в полях: ID,  Faculty, PS.

