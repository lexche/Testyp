# Практическая работа

Вот мы и изучили тему "Построение сетей". В ней мы постарались дать достаточно практики, но в уроках вам предлагалось лишь повторить в симуляторе за преподавателем с небольшими изменениями, но это совсем грустно и неинтересно. В этой практике мы предложим вам 3 задания, которые вам нужно решить самостоятельно.

Скачайте файл, прикреплённый к этой практике, и откройте его в программе Cisco Packet Tracer. Вы увидите следующую картину:


![p5 1](https://github.com/lexche/Testyp/assets/95694325/dbf1145a-9593-43c8-9dd1-48c481d66e72)


Выглядит совсем безобидно, правда? В начале разберём экспозицию: практическое задание состоит из 3х частей, каждое задание помечено отдельным цветом и подписано. 


### Задание 1.

В офисе работают 2 организации: организация 1 и организация 2. Обе организации арендуют часть офисного помещения. У организации 1 на компьютерах прописаны адреса из сети 172.16.10.0/24: 172.16.10.10-12. У организации 2 на компьютерах прописаны адреса из сети 172.16.20.0/24: 172.16.10.10-11. И менять адресацию на компьютерах они не хотят. Оборудование на обе организации одно, предоставленное арендодателем, требование обеих организаций: компьютеры не должны видеть друг друга.

Системный алминистратор, который начал настраивать сеть, но не успел довести работу до конца, так как его "перебросили" на другой объект, оставил такую информацию :

Все компьютеры подключены в 1 коммутатор. Какой компьютер в какой порт - неизвестно. Порт коммутатора GigabitEthernet0/1 подключен к порту роутера FastEthernet1\0. 

На роутере были выполнены следующие команды:

```

Router>enable
Router#
Router#configure tеrminаl
Router(config)#int FаstEthеrnet 1/0.100
Router(config-subif)#еncарsulatiоn dot1Q 100
Router(config-subif)#iр addrеss 172.16.10.1 255.255.255.0
Router(config-subif)#еx
Router(config)#int FаstEthеrnеt 1/0.200
Router(config-subif)#еncарsulation dot1Q 200
Router(config-subif)#iр аdd 172.16.20.1 255.255.255.0
Router(config-subif)#ex
Router(config)#  аccess-list 101 dеny ip 172.16.10.0 0.0.0.255 172.16.20.0 0.0.0.255
Router(config)#аccess-list 101 реrmit iр any any
Router(config)#  aссess-list 102 deny ip 172.16.20.0 0.0.0.255 172.16.10.0 0.0.0.255
Router(config)#aссess-list 102 permit ip any any
Router(config)#intеrface FаstEthеrnet 1/0.100
Router(config-subif)#  ip aссеss-group 101 in
Router(config-subif)#  ip aссеss-group 102 out
Router(config-subif)#ex
Router(config)#intеrface FаstEthernеt 1/0.200
Router(config-subif)#ip accеss-grоup 101 out
Router(config-subif)#ip access-grоup 102 in
Router(config-subif)#ex
Router(config)#ex
Router#wr
Building configuration...
[OK]

```

Давайте разбираться, что произошло:

1. Router(config)#int FastEthernet 1/0.100: Мы переходим в режим настройки интерфейса FastEthernet1/0.100.  Это создает подинтерфейс с идентификатором VLAN 10 на интерфейсе FastEthernet 1/0.

2. Router(config-subif)#encapsulation dot1Q 10: Указываем метод маркировки кадров на данном VLAN. dot1Q означает IEEE 802.1Q, который используется для маркировки кадров с идентификатором VLAN 100.

3. Router(config-subif)#ip address 172.16.10.1 255.255.255.0: Назначаем IP-адрес и маску данному подинтерфейсу. Подинтерфейсу назначается IP-адрес 172.16.10.1 с маской подсети 255.255.255.0 для обеспечения коммуникации в данной подсети.

4. Router(config-subif)#ex: Завершаем настройку данного подинтерфейса.
  

5. Router(config)#int FastEthernet 1/0.200: Мы переходим к настройке интерфейса FastEthernet1/0.200. Создается подинтерфейс с идентификатором VLAN 20 на интерфейсе FastEthernet 1/0.

6. Router(config-subif)#encapsulation dot1Q 200: Указываем метод маркировки кадров на данном VLAN. dot1Q означает IEEE 802.1Q, который используется для маркировки кадров с идентификатором VLAN 20.

7. Router(config-subif)#ip add 172.16.20.1 255.255.255.0: Назначаем IP-адрес и маску данному подинтерфейсу. Подинтерфейсу назначается IP-адрес 172.16.20.1 с маской подсети 255.255.255.0 для обеспечения коммуникации в данной подсети.

8. Router(config)#  access-list 101 deny ip 172.16.10.0 0.0.0.255 172.16.20.0 0.0.0.255: Создаем ACL для отказа в передаче IP-пакетов между двумя подсетями. В этой строке настраивается ACL 101 для блокировки трафика от подсети 172.16.10.0 к 172.16.20.0.

9. Router(config)#access-list 101 permit ip any any: Создаем разрешающее правило в ACL 101 для любого IP-трафика. Это правило позволяет всем IP-пакетам проходить через ACL 101 без каких-либо ограничений.

10. Router(config)#  access-list 102 deny ip 172.16.20.0 0.0.0.255 172.16.10.0 0.0.0.255: Создаем запретное правило в ACL 102 для блокировки IP-трафика между подсетями. В данной строке настраивается ACL 102 для блокировки трафика с подсети 172.16.20.0 к 172.16.10.0.

11. Router(config)#access-list 102 permit ip any any: Создаем разрешающее правило в ACL 102 для любого IP-трафика. Это правило позволяет всем IP-пакетам проходить через ACL 102 без каких-либо ограничений.

12. Router(config)#interface FastEthernet 1/0.100: Мы переходим в настройки подинтерфейса FastEthernet1/0.100. Данная команда переводит нас к настройке подинтерфейса для VLAN 100.

13. Router(config-subif)#  ip access-group 101 in: Применяем ACL 101 к входящему трафику на подинтерфейсе. ACL 101 применяется к входящему трафику на подинтерфейсе, разрешая все типы IP-трафика.

14. Router(config-subif)#  ip access-group 102 out: Применяем ACL 102 к исходящему трафику с подинтерфейса. ACL 102 применяется к исходящему трафику с подинтерфейса, блокируя трафик с подсети 172.16.20.0 к 172.16.10.0.

15. Router(config-subif)#ex: Завершаем настройку подинтерфейса. Данная команда выходит из режима настройки подинтерфейса и возвращаемся в общий конфигурационный режим.

16. Router(config)#interface FastEthernet 1/0.200: Переходим к настройкам подинтерфейса FastEthernet1/0.200. Данная команда переводит нас к настройке подинтерфейса для VLAN 200.

17. Router(config-subif)#ip access-group 101 out: Применяем ACL 101 к исходящему трафику с подинтерфейса.  ACL 101 применяется к исходящему трафику с подинтерфейса, разрешая все типы IP-трафика.

18. Router(config-subif)#ip access-group 102 in: Применяем ACL 102 к входящему трафику на подинтерфейсе. ACL 102 применяется к входящему трафику на подинтерфейсе, блокируя трафик с подсети 172.16.20.0 к 172.16.10.0.


Если сжато: на интерфейсе маршрутизатора, который подключён к коммутатору настроены 2 подинтерфейса для Vlan'ов каждой подсети: Vlan 100 для 172.16.10.0/24, Vlan 200 для 172.16.20.0/24, и назначены на эти подинтерфейсы адреса: 172.16.10.1 и 172.16.20.1, кроме того, ваш предшественник любезно настроил запрещающие правила между этими подсетями.

Ваша задача: "докрутить" коммутатор, каждый компьютер Организации 1 и Организации 2 должен увидеть шлюз "своей" подсети: 172.16.10.1 или 172.16.20.1.



### Задание 2.

Так, с коммутатором разобрались, надеюсь, что вы незабыли сказать в конце: "write", чтобы ваши настройки сохранились и после перезагрузки устройства. Едем дальше, "соседи": Организация 1 и Организация 2, решили разместить у того же арендатора и свои сервера. Серверы расположены на другой площадке. 

Инфраструктура состоит из: маршрутизатор, коммутатор и 2 сервера. На коммутаторе настроены 2 Vlan'а 10 (организация 1) и 20 (организация 2), trunk порт в маршрутизатор. На маршрутизаторе настроены подинтерфейсы на каждый vlan. Vlan10 для организации 1 имеет подсеть 192.168.10.0/24, адрес на маршрутизаторе 192.168.10.1, адрес сервера 192.168.10.10, Vlan20 для организации 2 имеет подсеть 192.168.20.0/24, адрес на маршрутизаторе 192.168.20.1, адрес сервера 192.168.20.10. Тут уже всё настроено и воткнуто куда нужно, но VLAN'ы видят друг друга.

Маршрутизаторы R0 и R1 соединены между собой через интерфейсы FastEthernet0/0 на двух маршрутизаторах. Но интерфейсы не настроены.

Ваша задача: Ограничить доступ между сетями  192.168.10.0/24 и  192.168.20.0/24. Настроить связь между двумя площадками. Каждая организация должна "увидеть" только "свой" сервер.



### Задание 3.

В третьем задании поговорим про внешнюю сеть. Во внешней сети есть 3 сервера: с адресами: 210.0.11.50-52 . Так же из этой провайдерской сети (210.0.11.0/24) арендодателю выдано 2 адреса: 210.0.11.10 и 210.0.11.20. Адрес 210.0.11.10 настроен на интерфейсе FastEthernet0/1 маршрутизатора R1. 

Ваша задача настроить с помощью NAT доступ к этим серверам с обеих площадок.


#### P.S. Мои маленькие копипастеры, код терминала, который представлен в первом задании, очень соблазнителен, чтобы им воспользоваться в задании 2. Поэтому там умышлено вставлены кириллические символы почти в каждую команду. Хотя бы перепечатайте руками. Если вы прочитали это сообщение не сразу, то: 1. Всё хорошо, вы не сошли с ума. 2. Не нужно так явно "срезать углы", думайте своей головой, вы тут за этим.
