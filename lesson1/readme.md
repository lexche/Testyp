## Урок 1. Основы cинтаксиса Python

Не Bash'ем с PowerShell'ом едиными жива автоматизация в системном администрировании, для автоматизации рутинных задач используется язык программирования Python, о нём в этой теме и пойдёт речь. Сделаем акцент на том, что в этой теме мы не ставим перед вами целью стать Python-разработчиком, цель этой темы: познакомить вас с языком программирования Python, научить понимать этот язык, понимать как писать или переделывать готовые скрипты для автоматизации рутинных задач.

Python — это язык программирования, который используется для написания инструкций для компьютеров. Он разработан таким образом, чтобы его было легко читать и понимать, почти как английский язык.

Python также является гибким, что означает, что его можно использовать для создания различных типов программ, таких как веб-сайты, игры и инструменты для научных исследований.

В отличие от некоторых других языков программирования, Python не требует предварительной компиляции, то есть преобразования исходного кода в машинный код, понятный компьютеру. Вместо этого Python интерпретируется, то есть выполняется строка за строкой во время выполнения программы.

В начале разберёмся какие есть преимущества у Python, перед Bash и PowerShell, так как нужно понимать где и как этот инструмент применять и почему он попал в данную тему:

1. Универсальность: Python является универсальным языком программирования, который широко используется в различных областях, включая веб-разработку, научные вычисления, автоматизацию и другие. Он предлагает богатые библиотеки и инструменты для решения различных задач.

2. Простота и читаемость кода: Python известен своей простотой и понятностью синтаксиса, что делает его легким для изучения и понимания. Код на Python часто более лаконичен и понятен, чем код на bash или PowerShell.

3. Поддержка различных операционных систем: Python поддерживает большинство операционных систем, в том числе Windows, macOS и различные дистрибутивы Linux. Это делает его универсальным инструментом для написания скриптов и автоматизации задач на разных платформах.

4. Большое количество библиотек и фреймворков: Библиотеки и фреймворки в Python – это наборы готового программного кода, которые упрощают разработку программ. 

Библиотеки представляют собой набор функций или модулей, которые могут быть использованы для решения определенных задач. Например, библиотека numpy предоставляет функциональность для работы с многомерными массивами и математическими функциями. 

Фреймворки в Python являются более обширными средствами разработки, обычно предоставляющими структуру для построения приложений. Например, фреймворк Django является популярным для создания веб-приложений, предоставляя не только инструменты для работы с базами данных и шаблонизацией, но и структуру для построения веб-приложения.

Python обладает огромным экосистемой библиотек и фреймворков, которые упрощают написание скриптов и приложений для множества задач. Большое сообщество разработчиков также способствует активному развитию и поддержке языка.

5. Возможность объектно-ориентированного программирования: Объектно-ориентированное программирование (ООП) - это методология программирования, которая позволяет организовать программу в виде взаимосвязанных объектов, которые взаимодействуют между собой. Основные принципы ООП включают в себя инкапсуляцию, наследование и полиморфизм. 

В ООП объекты являются основными элементами программы и могут иметь свои собственные свойства (данные) и методы (функции). Python поддерживает объектно-ориентированное программирование и позволяет создавать классы, которые являются абстрактными шаблонами для создания объектов. Классы могут иметь атрибуты (переменные) и методы (функции), которые могут использоваться для создания и манипулирования объектами.

Перед тем как перейти в консоль и "поздороваться с миром", поговорим об основных понятиях и синтаксисе в Python.

#### 1. Комментарии:
   Комментарии помогают делать код более понятным. Они начинаются с символа # и продолжаются до конца строки.

```
# Это комментарий
print("Привет, мир!")  # Это еще один комментарий
```

#### 2. Отступы:
Отступы играют важную роль в Python, так как они определяют блоки кода и потоки управления. В отличие от многих других языков программирования, Python использует отступы вместо скобок или ключевых слов для группировки операторов и определения структуры программы.

Синтаксис отступов

В Python отступы должны соблюдать следующие правила:

* Все операторы в одном блоке кода должны иметь одинаковый отступ.
* Отступ блока кода должен быть больше, чем отступ любого оператора вне этого блока.
* Обычно в Python используется отступ из четырех пробелов, хотя также допускается использование табуляции.

Блоки кода

Отступы определяют начало и конец блоков кода в Python. Блоки кода включают:

* Определения функций
* Циклы (for, while и т. д.)
* Условные операторы (if, elif, else)

Например:

```
def my_function():
    print("Hello, world!")

if x > 0:
    print("x is positive")
    print("Do something with x")
```

Поток управления

Отступы также используются для управления потоком выполнения программы. Операторы, относящиеся к одному и тому же потоку управления, должны иметь одинаковый отступ.

Например:

```
if x > 0:
    print("x is positive")
elif x < 0:
    print("x is negative")
else:
    print("x is zero")
```

Ошибки и исключения

Несоблюдение соглашения об отступах в Python приводит к синтаксическим ошибкам. Например, использование неравномерных отступов или неправильного количества отступов приведет к ошибке IndentationError.

Преимущества отступов

Использование отступов в Python имеет несколько преимуществ:

* Повышение читаемости кода: Отступы позволяют легко визуально различать блоки кода и потоки управления, что делает код более понятным.
* Уменьшение ошибок: Верное соблюдение отступов помогает избегать синтаксических ошибок, связанных с неправильным форматированием кода.
* Стимулирование хороших практик: Использование отступов в качестве стандарта языка программирования поощряет единообразие и согласованность в коде разных разработчиков.

#### 3. Типы данных в Python
Типы данных в Python представляют собой классификации объектов данных, которые определяют их характеристики и поведение. В Python существует множество встроенных типов данных, каждый со своими уникальными свойствами и методами. Подробнее о них поговорим в следующем уроке.

#### 4. Переменные
Переменные в Python используются для хранения данных и ссылок на объекты. Они представляют собой именованные области памяти, которые могут содержать значения различных типов данных.

Представьте: вы читаете книгу, но не можете запомнить, сколько страниц прочли. Умеете читать, но вот сохранить в памяти номер страницы не удаётся. Вылетает из головы, где вы остановились, поэтому приходится отсчитывать страницы от начала книги. 10, 24, 140, 250 страниц — и так каждый раз.

Так же беспомощны программы, которые не могут сохранять данные. Именно поэтому настоящее программирование начинается с переменных, запоминающих результаты промежуточных действий.
Переменная работает как подписанная коробка или помеченная ячейка, куда можно что-то положить и не потерять.
Когда в коде впервые пишут имя переменной, это называется объявление переменной. Имя придумывает сам программист. 
В Python переменную объявляют, присваивая ей какое-нибудь значение. Для объявления переменной достаточно просто указать имя, поставить знак «равно» = (этот знак в Питоне называется оператор присваивания) и написать значение, которое будет храниться в переменной.

Смысл оператора присваивания = отличается от того, к которому вы привыкли. В программировании выражение x = 1 означает: «теперь в переменной x хранится значение 1». 
После того как переменной присвоено какое-то значение, его можно заменить: для этого нужно присвоить этой переменной другое значение: x = 38. Теперь в переменной x хранится не единица, а число 38.
Вернёмся к чтению. Отложив программирование и ночной сон, вы прочли 210 страниц.  Теперь можно написать так:

```
pages = 210 
```

Здесь создана переменная с именем pages, в этой переменной сохранено значение 210. 
В переменных можно сохранить не только числа: в них можно «положить» и строку. Например, строка 'Привет, Мир!' — это другой пример данных, которые могут храниться в переменной.
```
# Объявили переменную с именем message и присвоили ей значение:
# строку 'Привет, Мир!'

message = 'Привет, Мир!'
```
А теперь следующий шаг: когда переменная объявлена и ей присвоено значение — имя этой переменной можно указывать в коде, и вместо имени будет подставляться её значение. 

Перейдём к практике. В современных ОС Linux Python уже предустановлен, интерпритатор 3 версии python (актуальная на данный момент) вызывается командой в консоли:

```
python3
```

Если же случилось такое, что python не установлен, то установите его командой:

```
sudo apt install python3

```

Выполнить Python-скрипт:

```

python3 script.py

```
### Квиз

1. Каждый вечер библиофил Архип закрывает книгу и записывает в переменную pages номер последней прочитанной страницы.

```
pages = 10  # В первый вечер
pages = 25  # Во второй вечер
pages = 50  # В третий
pages = 80  # В четвёртый
```
 А на пятый день Архип решил напечатать значение переменной pages:
```
print(pages) 
```
Что будет напечатано?

a. 100

b. 10 25 50 80

c. 80. Верно! Это последнее значение, которое было присвоено переменной, именно оно хранится сейчас в pages, оно и будет напечатано.

d. Всё сломается!

2. В интерпритаторе введено следующее:

six = 6
print(six * seven)

Что "вернёт" команда print?

a. 100

b. 42

c. 49

d. Ошибку. Верно. Так как производную seven мы не задавали.

3. Как нужно записать коменду print из предыдущего примера, чтобы она вывела 42?

a. print(six * 'seven')

b. print(six * '+seven+')

c. print(six * 7) Верно

d. print(6 * 7) Верно

4. Какой символ по умолчанию используется при отступах в Python?

a. Пробел Верно.

b. Табуляция

c. Новая строка

d. Точка с запятой

---

Не нужно бояться, что в работе придётся писать много кода. Мы потренировались в базовых конструкциях языка Python, из которых можно формировать более сложный код для скриптов. Для того, чтобы системный администратор не превращался в разработчика, который пишет сложный код, можно использовать готовые библиотеки.

В Python, библиотеки представляют собой коллекции функций и инструментов, предназначенных для выполнения определенных задач. Например, библиотека os позволяет взаимодействовать с операционной системой, подобно тому, как инструменты в вашем ящике помогают вам решать определенные задачи в реальной жизни. 

Рассмотрим несколько библиотек:

Давайте рассмотрим несколько примеров применения библиотек в системном администрировании:

1. Библиотека os: Позволяет вам взаимодействовать с операционной системой. Например, вы можете создавать, перемещать и удалять файлы, работать с директориями и многое другое.

2. Библиотека subprocess: Позволяет запускать внешние процессы из Python и взаимодействовать с ними. Например, вы можете использовать ее для выполнения команд в командной строке операционной системы.

3. Библиотека paramiko: Предоставляет возможности для работы с SSH протоколом в Python. Это полезно для автоматизации задач, связанных с удаленным управлением серверами.

4. Библиотека psutil: Позволяет получать информацию о системных ресурсах (таких как процессы, память, сетевые соединения) и управлять ими. Например, вы можете использовать ее для мониторинга производительности сервера.

5. Библиотека requests: используется для работы с HTTP-запросами. Эта библиотека позволяет отправлять GET и POST запросы на серверы, обрабатывать ответы и многое другое.

6.  Библиотека NumPy: предназначенная для работы с многомерными массивами данных и математическими функциями.

7.  Библиотека Pandas: предназначенная для работы с данными и анализа данных. 

Библиотеки в Python обычно устанавливаются с помощью менеджера пакетов pip, который автоматически загружает и устанавливает нужные библиотеки из центрального репозитория Python Package Index (PyPI). Для работы с библиотеками в Python, вам сначала нужно установить их, а затем импортировать в свой код.

##### 1. Установка библиотеки с помощью pip:

Вы можете установить библиотеку, например NumPy, следующим образом:

```
pip install numpy
```

##### 2. Импорт библиотеки в коде:

После установки библиотеки, вы можете импортировать её в свой код с помощью import. Вот пример:

```
import numpy as np
```

При использовании import вы загружаете всю библиотеку целиком, но можно импортировать только отдельные функции или классы при необходимости.

При использовании функций или структур данных из библиотеки, вам необходимо указывать префикс, который вы использовали в import (например, np для NumPy).

### 3. Использование функций из библиотеки:

Теперь когда вы импортировали библиотеку, вы можете использовать её функции и структуры данных. Например, чтобы создать массив с помощью NumPy:

```
arr = np.array([1, 2, 3, 4, 5])
print(arr)
```
---

Разберём пример посложнее с библиотекой requests:

```
import requests
from bs4 import BeautifulSoup
url = 'https://yandex.ru/'
response = requests.get(url)
response.encoding = 'utf-8'
if response.status_code == 200:
    soup = BeautifulSoup(response.text, 'html.parser')
    title = soup.title.text
    print(f'Заголовок главной страницы yandex.ru: {title}')
else:
    print('Ошибка при отправке запроса к yandex.ru')
```

##### Импорт библиотек

```
import requests
from bs4 import BeautifulSoup
```

Эти две строки импортируют необходимые библиотеки:

* requests для отправки HTTP-запросов
* BeautifulSoup для парсинга HTML

##### Настройка параметров запроса

url = 'https://yandex.ru/'


Эта строка содержит URL-адрес целевой веб-страницы, на которую будет отправляться запрос.

##### Отправка запроса

response = requests.get(url)

Эта строка отправляет GET-запрос на указанный URL-адрес и сохраняет ответ в переменной response.

##### Указание кодировки ответа

response.encoding = 'utf-8'

По умолчанию библиотека requests не указывает кодировку ответа. Для парсинга HTML-документа с кириллическими символами необходимо вручную установить кодировку UTF-8.

##### Обработка статуса ответа

if response.status_code == 200:
    ...
else:
    ...

Этот блок условного оператора проверяет код состояния ответа HTTP. Если код состояния равен 200, это означает, что запрос был выполнен успешно и можно продолжить парсинг HTML. В противном случае выдается сообщение об ошибке.

##### Парсинг HTML

soup = BeautifulSoup(response.text, 'html.parser')

Эта строка создает объект BeautifulSoup, который будет использоваться для парсинга HTML-документа из ответа. Парсер html.parser является встроенным в Python парсером, который можно использовать для большинства практических целей.

##### Извлечение заголовка

title = soup.title.text

Эта строка извлекает заголовок веб-страницы, который обычно является содержимым элемента <title>.

##### Вывод результата

print(f'Заголовок главной страницы yandex.ru: {title}')

Эта строка выводит заголовок веб-страницы с присоединенным информативным текстом.

### Практическое задание

Повторите разобранный пример с библиотекой Requests. Не забудьте перед этим установить библиотеки BeautifulSoup и requests.


