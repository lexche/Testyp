## Урок 1. Основы мониторинга инфраструктуры

В предыдущих уроках мы говорили о системном подходе в работе системного администратора. О том, что для корректной работы инфраструктуры организации, системный администратор должен быть в курсе работы всей системы, а если мы говорим о специалистах высокого уровня, то предугадывать потребности системы. И тут есть 2 пути: 

1. Поучаствовать в "Битве экстрасенсов", занять призовое место и надеятся, что "чутьё" не подведёт.
2. Развернуть систему мониторинга, которая будет сообщать о всех проблемах и поможет выявить слабые места инфраструктуры, планировать расширение и прочее.

1 путь             |  2 путь
:-------------------------:|:-------------------------:
<img src="https://github.com/lexche/Testyp/assets/95694325/5e0d1620-2b0a-4f24-b1a1-faed92535a8c" width="500" height="500"> | <img src="https://github.com/lexche/Testyp/assets/95694325/2d947b36-df84-4982-8a88-59613ed8aece" width="500" height="500">



В этой главе мы расскажем про 2й путь. 

Основные функции мониторинга:

1. Раннее обнаружение проблем и их предотвращение - это один из ключевых аспектов мониторинга. Здесь важно понимать, что чем раньше мы обнаружи, м проблему или аномалию в системе, тем быстрее сможем принять необходимые меры для ее устранения и минимизации отрицательного воздействия на пользователей. Мониторинг позволяет нам следить за поведением системы в реальном времени, выявлять отклонения от нормы и получать уведомления о проблемах.

2. Оптимизация производительности системы - это еще один важный аспект мониторинга. Путем анализа метрик производительности (например, использование CPU, памяти, сетевой трафик и другие) можно идентифицировать проблемные участки в системе и проводить оптимизации для улучшения производительности и эффективности работы.

3. Обеспечение доступности и надежности сервисов - это ключевая цель мониторинга. Путем мониторинга доступности сервисов, ресурсов и инфраструктуры мы можем обнаруживать проблемы, планировать проактивные меры и обеспечивать бесперебойную работу системы для пользователей.

4. Планирование емкости и масштабирования системы - это важный аспект, который позволяет предотвратить проблемы с производительностью и доступностью в будущем. Путем анализа данных о нагрузке и ресурсах мы можем планировать масштабирование или улучшение емкости системы заранее, что помогает избежать простоев и сбоев из-за нехватки ресурсов.

5. Предоставление отчетов и анализ данных мониторинга позволяет администраторам и руководству анализировать работу системы, принимать обоснованные решения на основе данных и улучшать процессы в организации.

Есть такое понятие как "4 золотых сигнала" мониторинга - это 4 ключевые метрики, важные для мониторинга и оценки здоровья системы. Эта концепция широко применяется в области управления и обслуживания IT-инфраструктуры. Вот более детальное объяснение каждого из них:

1. Latency (Задержка).
    Это время, которое требуется для выполнения запроса или операции в системе. Задержка может включать время передачи данных, обработки запроса и другие факторы, влияющие на скорость выполнения действий.
   
   Низкая задержка означает, что система отвечает быстро на запросы пользователей. Высокая задержка может сигнализировать о проблемах с производительностью или нагрузкой на систему.

3. Traffic (Трафик).
   Это количество запросов или данных, пересылаемых через систему за определенный период времени. Это также может включать изменения в объеме трафика.
   
   Мониторинг трафика помогает понять нагрузку на систему, выявлять резкие изменения в активности пользователей и планировать емкость системы в соответствии с объемом трафика.

4. Errors (Ошибки).
   Это процент ошибочных запросов или действий, возникающих в системе. Это может включать HTTP ошибки, ошибки при обработке запросов и другие виды ошибок.
   
   Отслеживание ошибок помогает выявить проблемные участки в системе, принимать меры по исправлению и улучшению качества обслуживания.

5. Saturation (Загруженность).
   Это степень загрузки ресурсов системы, таких как процессоры, память, сетевые соединения и другие. Сигнализирует о способности системы обрабатывать текущую нагрузку.
   
   Мониторинг загруженности ресурсов помогает избежать перегрузок и бутылочных горлышек в работе системы, что может привести к снижению производительности и простоям.

Но этими  метриками системный администратор, который любит спать спокойно, не ограничивается. Например, температурный режим оборудования и электроснабжение источников бесперебойного питания(ИБП) в серверной или коммутационных узлах - не менее важные показатели.

### Квиз: Роль мониторинга в работе системного администратора

Вопрос 1: Зачем системному администратору важен мониторинг сетевого трафика?

A. Для выращивания растений в офисе   
B. Для подсчета количества светодиодов на сервере  
C. Для обнаружения аномалий и угроз в сети  
D. Для управления буфетом в офисе  

Правильный ответ: C. Для обнаружения аномалий и угроз в сети. Мониторинг сетевого трафика помогает системному администратору выявлять аномальные активности, атаки или утечки данных в сети, что позволяет принимать соответствующие меры по безопасности.

---

Вопрос 2: Что представляют собой «четыре золотых сигнала» для системного администратора?

A. Метрики производительности автомобиля  
B. Ключевые индикаторы для оценки здоровья системы  
C. Матрицы для анализа данных клиентов  
D. Кодовые слова для авторизации доступа  

Правильный ответ: B. Ключевые индикаторы для оценки здоровья системы. Четыре золотых сигнала (Latency, Traffic, Errors, Saturation) являются важными метриками, которые помогают системному администратору оценить работоспособность системы.

---

Вопрос 3: Зачем системному администратору важно отслеживать уровень загрузки CPU и памяти на сервере?

A. Для мониторинга стоимости использования сервера  
B. Для обеспечения безопасности данных на сервере  
C. Для оптимизации производительности и предотвращения простоев  
D. Для проверки пропускной способности сетевого соединения  

Правильный ответ: C. Для оптимизации производительности и предотвращения простоев. Отслеживание уровня загрузки CPU и памяти помогает системному администратору оптимизировать работу сервера и избежать ситуаций перегрузки, что может привести к простоям.

---

Вопрос 4: Где системный администратор может использовать системы мониторинга?

A. Только в библиотеке для учета выданных книг  
B. В производственной линии для мониторинга производственных стадий  
C. В IT-инфраструктуре для отслеживания работы систем и сервисов  
D. В серфинге на пляже для отслеживания плавания  

Правильный ответ: C. В IT-инфраструктуре для отслеживания работы систем и сервисов. Системы мониторинга применяются системными администраторами именно в IT-инфраструктуре для контроля, анализа и оптимизации работы систем и сервисов.

Существует несколько видов систем мониторинга, которые различаются своими подходами к сбору данных, рассмотрим основные из них:

1. Агентные системы мониторинга. Это системы мониторинга, которые используют агентов для сбора информации с мониторируемых устройств и серверов. Агенты собирают данные о состоянии системы, метриках производительности, статусе служб и других параметрах, передавая их на центральный сервер для обработки и анализа.

2. Системы мониторинга с прокси-агентами. Система мониторинга со своими прокси-агентами, которые собирают информацию о работе серверов и устройств в локальной сети. Прокси-агенты передают данные на центральный сервер, обеспечивая мониторинг множества устройств с учетом географической дистанции и доступности мониторируемых объектов.

Отличия между этими видами систем мониторинга:

a. Расположение агентов: В агентных системах агенты устанавливаются на мониторируемых устройствах напрямую, в то время как в системах с прокси-агентами прокси-агенты размещаются на устройствах с легким доступом к другим ресурсам.
   
b. Задачи агентов: Агенты в агентных системах мониторинга непосредственно собирают данные с своих хостов, в то время как прокси-агенты в системах с прокси-агентами работают как посредники, собирая данные от других устройств.

c. Передача данных: В случае агентных систем данные собираются и отправляются на сервер непосредственно от агентов. В системах мониторинга с прокси-агентами данные собираются прокси-агентами и передаются на сервер от их имени.

3. Агентлесс системы мониторинга. В агентлесс системах данные собираются без установки агентов на мониторируемых устройствах, например, через сетевые протоколы или API. Система мониторинга, использующая агентлесс подход для сбора информации о работе систем может мониторить сеть, сервера, и приложения, собирая данные через SNMP и другие методы.

4. Системы мониторинга инфраструктуры как кода. В таких системах мониторинг интегрируется в процессы автоматизации конфигурации инфраструктуры, что позволяет настраивать и управлять мониторингом как кодом. Такие системы в сочетании с инструментами CI/CD позволяют автоматически добавлять новые мониторинговые ресурсы и настройки в случае изменений в инфраструктуре.
   

