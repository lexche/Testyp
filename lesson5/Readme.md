## Урок 5. Виртуальная память.

Представьте, что у вас ограниченный объем физической памяти, но ваша задача — запустить программу, требующую больше памяти, чем доступно. Как операционная система решает эту задачу, не допуская сбоев в работе?

Важно не перепутать виртуальную память и механизмы подкачки. Виртуальная память и механизм подкачки — две технологии, которые решают разные задачи. Виртуальная память избавляет разработчика программы от головной боли вычисления адресов 
физической памяти: в его распоряжении есть непрерывный набор адресов, которые он может использовать. А механизм подкачки, который пользуется благами механизма виртуальных адресов, позволяет расширить границы оперативной памяти за счёт дискового пространства.

Виртуальная память представляет собой механизм, который позволяет программам использовать больше памяти, чем есть на самом устройстве. При этом операционная система периодически перемещает данные между физической памятью и дисковым пространством, чтобы обеспечить
удовлетворение требований программ к памяти. Это дает впечатление, что у каждой программы есть своя обширная область памяти.

Рассмотрим основные методы реализации виртуальной памяти:

- Страничное преобразование виртуальной памяти. В этой схеме память разбивается на небольшие фрагменты (страницы), и у каждой страницы есть свое отображение на физическую память. Когда процесс обращается к адресному пространству, операционная система переводит
  виртуальные адреса в физические через таблицу страниц.

- Сегментация виртуальной памяти. Подход сегментации позволяет адресному пространству процесса состоять не только из страниц, но и из логических блоков различных размеров (сегментов). Эти сегменты содержат информацию о коде программы, стеке, куче и других
  атрибутах процесса.

- Сегментно-страничная виртуальная память. Она работает с использованием двойной системы разделения: сначала виртуальное адресное пространство разделяется на сегменты, а затем сами сегменты разбиваются на страницы. В этой системе перемещение данных осуществляется
   на уровне страниц. Таким образом, этот метод управления памятью объединяет в себе определенные характеристики и преимущества обоих предыдущих подходов, обеспечивая более гибкое и эффективное адресное пространство.

  Давайте разберём на примерах случаи использования виртуальной памяти.

- Многозадачные операционные системы. Классический пример использования виртуальной памяти - это многозадачные операционные системы, такие как Linux, Windows или macOS. В этом контексте, виртуальная память позволяет каждому процессу иметь свое
  собственное виртуальное адресное пространство, что обеспечивает изоляцию процессов друг от друга. Это помогает предотвратить конфликты при доступе к памяти и повышает безопасность системы.

Метод реализации: Виртуальная память в многозадачных операционных системах обычно основана на страничном преобразовании, которое разбивает память на небольшие фрагменты (страницы) и отображает их на физическую память через таблицу страниц.

- Поддержка крупных приложений. Виртуальная память позволяет реализовывать крупные приложения, такие как базы данных или графические редакторы, которые требуют значительных объемов памяти. Благодаря виртуальной памяти, приложения могут эффективно
  управлять большими объемами данных, не требуя огромное количество физической оперативной памяти.

Метод реализации: Для обработки крупных приложений виртуальная память использует страничное преобразование и сегментацию, позволяя выделять и освобождать память для различных компонентов приложения по мере необходимости.

- Виртуальные машины и контейнеры. Виртуальная память играет важную роль в технологиях виртуализации, таких как виртуальные машины (VM) и контейнеры. При запуске виртуальной машины на одном физическом оборудовании, виртуальная память позволяет
  изолировать и назначать каждой виртуальной машине свое собственное виртуальное адресное пространство.

Метод реализации: Виртуальная память в этом контексте также использует страничное преобразование, чтобы обеспечить изоляцию и назначение ресурсов каждой виртуальной машине.

---

  В самом начале урока мы сделали акцент на схожести виртуальной памяти с таким механизмом, как файл подкачки. Эти 2 понятия часто путают между собой из-за их тесно взаимосвязанных функций. С определением и методами виртуальной памяти мы познакомились выше, давайте 
познакомимся с механизмом подкачки через сравнение с виртуальной памятью, чтобы лучше понять в чём их различия.

Виртуальная память представляет собой механизм, позволяющий программам использовать больше памяти, чем есть на самом устройстве, и обеспечивает иллюзию каждому процессу обладания отдельной обширной областью памяти для работы. Это достигается за счет отображения 
виртуальных адресов на физическую память, используя методы, такие как страничное преобразование и сегментация.

Файл подкачки (или область подкачки) представляет собой область на постоянном накопителе (чаще всего на жестком диске), которая используется для временного хранения частей данных, которые временно не нужны в оперативной памяти процессора. Когда нехватка физической
памяти становится проблемой, операционная система перемещает части неиспользуемых данных из оперативной памяти в файл подкачки, освобождая тем самым место для активных данных.

Отличие между ними:
- Функциональное назначение: Виртуальная память предоставляет каждому процессу изолированное адресное пространство, тогда как файл подкачки представляет собой механизм, с помощью которого операционная система временно сохраняет часть данных процесса на диск, чтобы
   освободить физическую память.
- Использование: Виртуальная память используется для предоставления каждому процессу впечатления наличия большого объема памяти, в то время как файл подкачки работает как механизм резервного хранения данных в случае нехватки оперативной памяти.
- Размещение данных: Виртуальная память хранит данные в адресном пространстве процесса, тогда как файл подкачки хранит данные на постоянном накопителе.

Таким образом, виртуальная память и файл подкачки, хотя и имеют определенное сходство в функционировании, выполняют разные роли в управлении памятью и обеспечении стабильной работы операционной системы при работе с большими объемами данных.

## КВИЗ 

Вопрос 1: Чем отличается виртуальная память от механизма подкачки?

1. Виртуальная память является физическим хранилищем данных, а механизм подкачки представляет собой аппаратное обеспечение для обработки данных.
2. Виртуальная память используется для временного хранения часто используемых данных, в то время как механизм подкачки организует перемещение данных между различными типами памяти.
3. Виртуальная память представляет собой адресное пространство, которое может быть больше, чем объем физической памяти, тогда как механизм подкачки используется для временного хранения неиспользуемых данных на диске.  /Верно
4. Виртуальная память и механизм подкачки являются синонимами и используются взаимозаменяемо.

Объяснение: Виртуальная память представляет собой механизм, позволяющий программам использовать больше памяти, чем есть на самом устройстве. Механизм подкачки, с другой стороны, представляет собой процесс перемещения части данных из оперативной памяти на постоянное хранилище (например, жесткий диск) в случае нехватки оперативной памяти.

---

Вопрос 2: Какие методы реализации чаще всего используются для виртуальной памяти и механизма подкачки?

1. Виртуальная память использует виртуальные шифрованные блоки, а механизм подкачки основан на алгоритмах сжатия данных.
2. Оба метода основаны на механизмах аутентификации и шифрования для обеспечения безопасности данных.
3. Для виртуальной памяти часто используется страничное преобразование и сегментация, в то время как механизм подкачки оперирует с адресным пространством и обменом страниц между оперативной памятью и диском.  /Верно
4. Оба метода используют цифровые сигнатуры для проверки целостности данных при перемещении между различными типами памяти.

Объяснение: Виртуальная память часто реализуется через страничное преобразование и сегментацию для управления адресным пространством процессов. Механизм подкачки работает посредством перемещения страниц между оперативной памятью и областью подкачки на диске при необходимости.

---

Вопрос 3: Какой из нижеперечисленных примеров лучше описывает использование виртуальной памяти?

1. Отправка кэшированных данных на диск, чтобы освободить место в оперативной памяти для активных данных.
2. Использование адресного пространства, которое может быть больше, чем физическая память, для обеспечения каждому процессу изоляции и безопасного доступа к памяти. /Верно
3. Использование цифровой подписи для проверки целостности данных в операционной памяти.
4. Контроль доступа к памяти при помощи паролей и аутентификации.

Объяснение: Виртуальная память позволяет каждому процессу думать, что у него есть доступ к большему объему памяти, чем есть фактически. Она обеспечивает изоляцию процессов и управление доступом к памяти, что повышает безопасность и стабильность системы.

Вопрос 4: Какой из перечисленных примеров наилучшим образом характеризует использование механизма подкачки?

1. Оптимизация выполнения вычислений при помощи многоканального кэширования данных.
2. Резервное копирование данных на внешний накопитель для обеспечения их сохранности.
3. Автоматическое перемещение неиспользуемых данных из оперативной памяти на диск для освобождения места. Вопрос 4: Какой из перечисленных примеров наилучшим образом характеризует использование механизма подкачки?

1. Оптимизация выполнения вычислений при помощи многоканального кэширования данных.
2. Резервное копирование данных на внешний накопитель для обеспечения их сохранности.
3. Автоматическое перемещение неиспользуемых данных из оперативной памяти на диск для освобождения места. /Верно
4. Контроль доступа к данным при помощи шифрования и цифровой подписи.

Объяснение: Механизм подкачки в операционной системе автоматически перемещает неиспользуемые данные из оперативной памяти на диск для освобождения места и обеспечения более эффективного использования физической оперативной памяти.




















