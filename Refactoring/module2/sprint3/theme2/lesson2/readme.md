# Урок 1. Инфраструктурные сервисы на Linux

Предыдущие уроки сформировали у вас общее представление об ОС семейства Linux. Однако сами по себе они не выполняют никаких функций. В этом небольшом уроке рассмотрим, как cисадмины используют эту операционную систему для решения инфраструктурных задач.

>[Реплика героя курса] Одно из преимуществ Linux — широкий набор инструментов. Главное, знать нужный дистрибутив и уметь работать с ним. Почти для каждого ключевого типа инфраструктуры можно найти подходящий (и бесплатный!) сервис.

## Linux как ядро сети

![маршрутизация](https://code.s3.yandex.net/sys-admin-content/Мод.%202,%20спринт%203,%20тема%202,%20урок%201/Маршрутизатор.png?etag=5bb45be8dd1737bccdc48230505fba56)
>[Подпись] Так можно представить маршрутизацию на Linux

В Linux много возможностей для управления сетевым трафиком: можно задавать правила межсетевого экрана для фильтрации и перенаправления пакетов, доступ есть и к параметрам сети для настройки маршрутизации и создания VPN-туннелей. 

## Система хранения данных

![файловый сервер](https://code.s3.yandex.net/sys-admin-content/Мод.%202,%20спринт%203,%20тема%202,%20урок%201/Файловый%20сервер.png?etag=10b8e56658ede9a0391e948008c89a6b)
>[Подпись] Устройство файлового сервера

Практически ни одна организация не обходится без файловых серверов. У Linux есть пакеты для управления общими ресурсами с гибкими настройками доступа по разным протоколам: {{SMB, NFS, FTP}}[sys_admin_sprint_3 SMB, NFS, FTP]. Также вы можете работать с дисками, объединять их в программные RAID-массивы, повышая так производительность и отказоустойчивость системы.

## DHCP и DNS

**DHCP** (англ. Dynamic Host Configuration Protocol — «протокол динамической настройки узла») и **DNS** (англ. Domain Name System — «система доменных имён») — основные сервисы для любой организации, и они тоже могут базироваться на Linux. 

DNS преобразует текстовые имена узлов в IP-адреса, необходимые для маршрутизации сетевого трафика. DHCP же позволяет устройствам автоматически получать их и другие значения, которые нужны для подключения к сети. С DHCP отпадает необходимость в ручной настройке сетевых параметров на каждом узле, что облегчает работу системных администраторов.

Так же к "популярным" сетевым ресурсам относятся средства печати, более известные как принтеры. В рамках данного урока мы рассмотрим CUPS.

CUPS (Common Unix Printing System) - это система печати для Unix-подобных операционных систем, таких как Ubuntu. Она обеспечивает централизованный менеджмент печати, позволяя пользователям печатать на разные принтеры с разных устройств.

Для чего нужен CUPS:

• Управление принтерами: CUPS позволяет добавлять, удалять и настраивать принтеры. Вы можете установить разные типы принтеров, включая локальные и сетевые.

• Очередь печати: CUPS управляет очередью печати, позволяя печатать несколько задач одновременно. Вы можете просматривать очередь, отменять задачи и изменять приоритет печати.

• Поддержка различных протоколов: CUPS поддерживает широкий спектр протоколов печати, включая IPP, LPR, SMB и другие.

• Веб-интерфейс: CUPS имеет веб-интерфейс, который позволяет управлять системой печати через браузер.

• Совместимость с приложениями: Большинство приложений в Ubuntu используют CUPS для печати, что делает его неотъемлемой частью экосистемы.

Давайте посмотрим как это работает на практике. Для этого вам понадобиться виртуальная машина с графическим интерфейсом.

Откройте терминал и обновите список репозиториев:

```c
sudo apt update
```
Введите пароль своего пользователя.

Далее установим CUPS:

```c
sudo apt install cups -y
```
Введите пароль своего пользователя. Дождитесь завершения установки: Система установит CUPS и все необходимые зависимости.

Файл конфигурации CUPS находится по пути /etc/cups/cupsd.conf. 

Файл cupsd.conf  разделен на  разделы,  которые  определяют  разные  настройки. Вот некоторые из них:

• <VirtualHost />:  Этот  раздел  содержит  настройки,  применяемые  ко  всем  виртуальным  хостам. 

• <Location />:  Этот  раздел  содержит  настройки,  применяемые  к  определенным  путям  в  веб-интерфейсе  CUPS.

• <Printer />:  Этот  раздел  содержит  настройки  для  конкретного  принтера.  Каждому  принтеру  соответствует  свой  раздел  <Printer name="имя_принтера" />. 

Настройки:

Внутри разделов вы можете найти различные  настройки,  которые  можно  изменять. 

Вот некоторые основные настройки:

• Port:  Определяет  порт,  на  котором  работает  CUPS.  По  умолчанию  это  порт  631. 

• Listen:  Определяет  IP-адреса,  на  которых  CUPS  будет  слушать  соединения.  По  умолчанию  это  все  IP-адреса. 

• ServerName:  Определяет  имя  сервера,  которое  будет  использоваться  в  веб-интерфейсе  CUPS. 

• AuthType:  Определяет  тип  аутентификации,  который  будет  использоваться  для  доступа  к  веб-интерфейсу  CUPS. 

• AuthGroup:  Определяет  группу  пользователей,  которые  имеют  право  доступа  к  веб-интерфейсу  CUPS.
• LogFormat:  Определяет  формат  записи  логов. 

• LogLevel:  Определяет  уровень  детальности  логов. 

• DefaultAuthType:  Определяет  тип  аутентификации,  который  будет  использоваться  по  умолчанию. 

• DefaultLogLevel:  Определяет  уровень  детальности  логов,  который  будет  использоваться  по  умолчанию. 

• MaxClients:  Определяет  максимальное  количество  одновременных  соединений,  которые  может  обрабатывать  CUPS. 

• MaxRequestPerMinute:  Определяет  максимальное  количество  запросов,  которые  могут  быть  обработаны  CUPS  в  минуту. 

• MinRequestPerMinute:  Определяет  минимальное  количество  запросов,  которые  могут  быть  обработаны  CUPS  в  минуту. 

• Allow From:  Определяет  IP-адреса,  с  которых  разрешен  доступ  к  CUPS. 

• Deny From:  Определяет  IP-адреса,  с  которых  запрещен  доступ  к  CUPS. 

• Order:  Определяет  порядок,  в  котором  будут  применяться  правила  доступа.

По умолчанию CUPS будет доступен через web-браузер по адресу: http://localhost:631/ или http://ip-адрес_виртуальной_машины:631/ если заходите с другого компьютера в той же локальной сети:


![photo_2024-11-05_18-40-46](https://github.com/user-attachments/assets/ce4d08a7-dbbe-47c2-9e7d-de6d581df301)

Нажмите на вкладку "Administration" и введите логин и пароль вашего пользователя:

![photo_2024-11-05_18-45-26](https://github.com/user-attachments/assets/3f9efd68-99d4-4560-8ff1-9e63c7de7c5a)

Теперь мы можем добавить сетевой принтер через сетевой интерфейс:

![photo_2024-11-05_18-48-50](https://github.com/user-attachments/assets/6326894d-5b04-480e-a822-5072e86ea9a7)


>[Реплика героя курса] На этом завершаем наш краткий и обзор и приступаем к практике — настройке сервисов!

>[Кнопка-переход] Попрактиковаться

---

### Ключи глоссария

{{SMB, NFS, FTP}}
Их мы рассмотрим в следующем уроке.


>[Кнопка-переход] Готово! Продолжить обучение
